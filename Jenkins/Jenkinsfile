pipeline {
    agent any

    stages {
        stage('Checkout SCM') {
            steps {
                echo 'Checking out source code...'
                checkout scm
            }
        }

        stage('Instalar Dependencias') {
            steps {
                echo 'Verificando instalación de Python y pip'
                script {
                    // Muestra el PATH, versión de Python y pip para verificar que están instalados
                    sh 'echo $PATH'  
                    sh 'python3 --version'
                    sh 'pip3 --version'
                    
                    // Cambia a la carpeta donde está el requirements.txt y luego instala las dependencias
                    sh 'cd Jenkins && pip3 install -r requirements.txt'
                }
            }
        }

        stage('Entrenar Modelo') {
            steps {
                echo 'Entrenando modelo...'
                // Tu código para entrenar el modelo aquí
            }
        }

        stage('Ejecutar Pruebas') {
            steps {
                echo 'Ejecutando pruebas...'
                // Tu código para ejecutar pruebas aquí
            }
        }

        stage('Post Actions') {
            steps {
                echo 'Cleaning up workspace...'
                cleanWs()
            }
        }
    }

    post {
        failure {
            echo 'El pipeline falló. Revisa los logs detallados.'
        }
    }
}






