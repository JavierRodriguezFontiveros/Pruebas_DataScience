pipeline {
    agent any

    environment {
        // Definir las rutas de Python y pip
        PYTHON_HOME = 'C:\\Users\\Jjaavviieerroperro\\AppData\\Local\\Programs\\Python\\Python312'
        PATH = "${PYTHON_HOME};${PYTHON_HOME}\\Scripts;${env.PATH}"
    }

    stages {
        stage('Checkout SCM') {
            steps {
                echo 'Checking out source code...'
                checkout scm
            }
        }

        stage('Instalar Dependencias') {
            steps {
                echo 'Verificando instalación de Python y pip'
                script {
                    // Usar 'bat' en vez de 'sh' si estás en Windows
                    bat 'echo %PATH%'  // Muestra el PATH en Windows
                    bat 'python --version'  // Mostrar la versión de Python
                    bat 'pip --version'  // Mostrar la versión de pip
                    bat 'pip install -r requirements.txt'  // Instalar dependencias
                }
            }
        }

        stage('Entrenar Modelo') {
            steps {
                echo 'Entrenando modelo...'
                // Tu código para entrenar el modelo aquí
            }
        }

        stage('Ejecutar Pruebas') {
            steps {
                echo 'Ejecutando pruebas...'
                // Tu código para ejecutar pruebas aquí
            }
        }

        stage('Post Actions') {
            steps {
                echo 'Cleaning up workspace...'
                cleanWs()
            }
        }
    }

    post {
        failure {
            echo 'El pipeline falló. Revisa los logs detallados.'
        }
    }
}





